# Phi (Ï†) - ×›×œ×œ×™ ×¤×¨×•×™×§×˜

## ××™×ª×•×’ ×•×”×©×¤×”
- **×©× ×”××•×¦×¨:** Phi (Ï†) - ×”×™×—×¡ ×”×–×”×‘ ×©×œ ×”×›×¡×£ ×©×œ×š
- **Ï† = ××™×–×•×Ÿ, × ×•×¡×—×”, ×ª×›× ×•×Ÿ ×—×›×**
- ×”×©×¤×” ×”×¢×™×§×¨×™×ª ×©×œ ×”×¤×¨×•×™×§×˜ ×”×™× **×¢×‘×¨×™×ª**
- ×›×œ ×”×××©×§×™×, ×”×•×“×¢×•×ª, ×‘×•×˜×™× - ×‘×¢×‘×¨×™×ª
- ×”×ª×™×¢×•×“ ×”×˜×›× ×™ ×‘×× ×’×œ×™×ª
- ×§×•×“ ×•×ª×’×•×‘×•×ª ×‘×§×•×“ ×‘×× ×’×œ×™×ª
- ×”×¡×™××Ÿ Ï† ×¦×¨×™×š ×œ×”×™×•×ª × ×•×›×— ×‘×›×œ ××§×•× ×‘×¢×™×¦×•×‘

## ×¡×’× ×•×Ÿ ×§×•×“

### TypeScript
- ×©×™××•×© ×§×¤×“× ×™ ×‘-TypeScript
- ×”×™×× ×¢×•×ª ×-`any` - ×ª××™×“ ×œ×¦×™×™×Ÿ ×˜×™×¤×•×¡×™×
- ×©×™××•×© ×‘-Zod ×œ×•×œ×™×“×¦×™×”
- ×”×¢×“×¤×ª `interface` ×¢×œ `type` ×œ××‘× ×™ × ×ª×•× ×™×

### React/Next.js
- ×©×™××•×© ×‘-App Router (×œ× Pages Router)
- Server Components ×›×‘×¨×™×¨×ª ××—×“×œ
- Client Components ×¨×§ ×›×©×¦×¨×™×š interactivity
- ×©×™××•×© ×‘-Server Actions ×œ×¤×¢×•×œ×•×ª
- Custom hooks ×¢× prefix `use`

### Naming Conventions
- Components: `PascalCase`
- Files: `kebab-case` ××• `PascalCase` (components)
- Functions: `camelCase`
- Constants: `UPPER_SNAKE_CASE`
- Database tables: `snake_case`

### ××¨×’×•×Ÿ ×ª×™×§×™×•×ª
```
/app                 - pages & routes
/components
  /ui               - shadcn components
  /dashboard        - dashboard-specific
  /shared           - reusable components
/lib
  /supabase         - DB clients
  /utils            - helper functions
  /hooks            - custom hooks
/types              - TypeScript types
/public             - static assets
```

## Database (Supabase)

### ×—×•×§×™×
1. **×ª××™×“** ×œ×”×©×ª××© ×‘-RLS - ××£ ××©×ª××© ×œ× ×¨×•××” × ×ª×•× ×™× ×©×œ ××—×¨×™×
2. **××™×Ÿ** ×œ×”×©×ª××© ×‘-service_role_key ×‘×¦×“ ×”×œ×§×•×—
3. ×›×œ query ×‘-server component ××• server action
4. ×©×™××•×© ×‘-prepared statements (Supabase ××˜×¤×œ ××•×˜×•××˜×™×ª)

### ×˜×‘×œ××•×ª ××¨×›×–×™×•×ª
- `users` - ××©×ª××©×™×
- `transactions` - ×ª× ×•×¢×•×ª ×›×¡×¤×™×•×ª
- `budget_categories` - ×§×˜×’×•×¨×™×•×ª ×ª×§×¦×™×‘
- `goals` - ×™×¢×“×™×
- `wa_messages` - ×”×•×“×¢×•×ª WhatsApp
- `alerts` - ×”×ª×¨××•×ª
- `subscriptions` - ×× ×•×™×™×
- `receipts` - ×§×‘×œ×•×ª OCR

### Views
- `monthly_budget_tracking` - ××¢×§×‘ ×ª×§×¦×™×‘ ×‘×–××Ÿ ×××ª
- `user_monthly_stats` - ×¡×˜×˜×™×¡×˜×™×§×•×ª ×—×•×“×©×™×•×ª

### ×¤×•× ×§×¦×™×•×ª
- `calculate_financial_health(user_id)` - ×¦×™×•×Ÿ Ï† (Ï† Score) 0-100 ××‘×•×¡×¡ ×¢×œ 12 ×¤×¨××˜×¨×™×
- `get_daily_summary(user_id, date)` - ×¡×™×›×•× ×™×•××™

## ×¢×™×¦×•×‘ (UI/UX)

### ×¦×‘×¢×™× - Phi Brand
```css
/* Phi Color Palette - Nord-inspired */
--phi-dark: #2E3440;      /* Primary dark (××¤×•×¨-×›×—×•×œ ×¨×š) */
--phi-gold: #A96B48;      /* Accent gold (× ×—×•×©×ª/×‘×¨×•× ×–×” - ×§×©×¨ ×œ-Ï†) */
--phi-mint: #8FBCBB;      /* Success mint (×™×¨×•×§-×× ×˜×” ×¢×“×™×Ÿ) */
--phi-bg: #ECEFF4;        /* Background (××¤×•×¨ ×‘×”×™×¨ ×××•×“) */
--phi-coral: #D08770;     /* Highlight coral (×›×ª×•×-××“××“× ×¢×“×™×Ÿ) */
--phi-slate: #4C566A;     /* Secondary slate */
--phi-frost: #D8DEE9;     /* Frost (×’×•×•×Ÿ ×‘×”×™×¨) */
```

### ×˜×™×¤×•×’×¨×¤×™×”
- Headers: Inter (clean, modern) - `font-inter`
- Body: Heebo (×¢×‘×¨×™×ª) - ×‘×¨×™×¨×ª ××—×“×œ
- Ï† Symbol: Georgia, "Times New Roman", serif
- Weights: 400 (regular), 500 (medium), 600 (semi-bold), 700 (bold), 800 (extra-bold)

### ×§×•××¤×•× × ×˜×•×ª
- ×©×™××•×© ×‘-shadcn/ui ×›×‘×¡×™×¡
- Lucide-react ×œ××™×™×§×•× ×™×
- Recharts ×œ×’×¨×¤×™×
- Framer Motion ×œ×× ×™××¦×™×•×ª ×—×œ×§×•×ª
- **PhiLogo** - ×œ×•×’×• ×¢× ×”×¡×™××Ÿ Ï†
- **PhiScore** - ××“ ×¦×™×•×Ÿ Ï† (0-100)
- **PhiAnimation** - ×× ×™××¦×™×•×ª ×©×œ ×”×¡×™××Ÿ Ï†

### ×¢×§×¨×•× ×•×ª
1. **Mobile First** - ×¢×™×¦×•×‘ ×œ××•×‘×™×™×œ ×§×•×“×
2. **Minimalist Design** - ×¢×™×¦×•×‘ ××•×“×¨× ×™ ××™× ×™××œ×™×¡×˜×™ (×‘×”×©×¨××ª Stripe/Linear)
3. **Phi-Centric** - ×”×¡×™××Ÿ Ï† × ×•×›×— ×‘×›×œ ××§×•×
4. **Accessibility** - WCAG 2.1 AA
5. **RTL Support** - ×ª××™×›×” ××œ××” ×‘×¢×‘×¨×™×ª
6. **Loading States** - ×ª××™×“ ×œ×”×¦×™×’ feedback
7. **Error Boundaries** - ×ª×¤×™×¡×ª ×©×’×™××•×ª ×‘×¨××ª ×§×•××¤×•× × ×˜×•×ª
8. **Smooth Animations** - ×× ×™××¦×™×•×ª ×¢×“×™× ×•×ª ×¢× Framer Motion

## ××‘×˜×—×”

### Authentication
- Supabase Auth ×‘×œ×‘×“
- ××™×Ÿ JWT tokens ×™×“× ×™×™×
- Protected routes ×¢× middleware

### Input Validation
- Zod schemas ×œ×›×œ ×˜×•×¤×¡
- Server-side validation ×ª××™×“
- Sanitization ×©×œ input

### Webhooks
- ×ª××™×“ ×œ×××ª signature
- Rate limiting
- Logging ××œ×

## ×‘×•×˜ WhatsApp

### ×¢×§×¨×•× ×•×ª ×ª×§×©×•×¨×ª
1. **×©×¤×” ×—××” ×•××¢×•×“×“×ª** - ×œ× ×¤×•×¨××œ×™×ª
2. **×§×¦×¨ ×•×ª××¦×™×ª×™** - ×œ× ×™×•×ª×¨ ×-2-3 ×©×•×¨×•×ª
3. **××™××•×’'×™× ×‘××™×“×”** - ×œ× ×œ×”×¤×¨×™×–
4. **×ª××™×“ ×—×™×•×‘×™** - ×’× ×‘×”×ª×¨××•×ª

### ×“×•×’×××•×ª
âœ… "×”×™×™! ×¨×©××ª×™ ×œ×š ×”×•×¦××” ×©×œ 55 â‚ª ×¢×œ ×§×¤×”. ×¢×•×“ 150 â‚ª × ×©××¨×• ×œ×š ×‘×§×˜×’×•×¨×™×” ×”×–×• ×”×—×•×“×© ğŸ˜Š"
âŒ "× ×¨×©××” ×”×•×¦××” ×‘×¡×š 55 ×©×´×— ×‘×§×˜×’×•×¨×™×™×ª ×‘×™×œ×•×™×™×. ×¡×”×´×› ×”×•×¦××•×ª: 1,234 ×©×´×—"

### ×–×™×”×•×™ ×”×•×“×¢×•×ª
- Regex ×œ×–×™×”×•×™ ×¡×›×•××™×: `\d+(\.\d{1,2})?\s*â‚ª|×©×´×—`
- AI fallback ×× regex × ×›×©×œ
- ×ª××™×“ ×œ×‘×§×© ××™×©×•×¨ ×œ×¤× ×™ ×©××™×¨×”

## AI Assistant

### OpenAI Configuration
- Model: GPT-4 (××• GPT-3.5-turbo ×œ×—×™×¡×›×•×Ÿ)
- Temperature: 0.7
- Max tokens: 500
- Language: Hebrew

### System Prompt
```
××ª×” ××××Ÿ Ï† (Phi) - ××××Ÿ ×¤×™× × ×¡×™ ××™×©×™ ×™×©×¨××œ×™. ××ª×” ××œ×•×•×” ××ª ×”××©×ª××© ×œ××¦×•× ××ª ×”-Ï† ×©×œ×• - ×”××™×–×•×Ÿ ×”××•×©×œ× ×‘×™×Ÿ ×”×›× ×¡×•×ª ×œ×”×•×¦××•×ª.
×“×‘×¨ ×‘×©×¤×” ×—××”, ×¤×©×•×˜×” ×•×™×“×™×“×•×ª×™×ª. ×ª×Ÿ ×¢×¦×•×ª ××¢×©×™×•×ª, ×œ× ×ª×™××•×¨×˜×™×•×ª.
××œ ×ª×™×ª×Ÿ ×™×™×¢×•×¥ ×¤×™× × ×¡×™ ××• ××©×¤×˜×™ ×¤×•×¨××œ×™ - ××ª×” ××œ×•×•×”, ×œ× ×™×•×¢×¥.
×”×©×ª××© ×‘××™××•×’'×™× ×‘××™×“×”. ×ª××™×“ ×¢×•×“×“ ×•×ª××•×š.
×”×©×ª××© ×‘××•× ×— "×¦×™×•×Ÿ Ï†" ××• "Ï† Score" ×›×©××“×‘×¨×™× ×¢×œ ×‘×¨×™××•×ª ×¤×™× × ×¡×™×ª.
```

### Context ×œ×›×œ query
- ×¡×›×•× ×ª×§×¦×™×‘ ×—×•×“×©×™
- ×™×¢×“×™× ×¤×¢×™×œ×™×
- ×—×¨×™×’×•×ª ××—×¨×•× ×•×ª
- ××’××•×ª ×”×•×¦××”

## Testing

### ××” ×œ×‘×“×•×§
1. RLS policies - ×©××©×ª××© ×œ× ×¨×•××” × ×ª×•× ×™× ×©×œ ××—×¨×™×
2. Form validation - ×©×œ× ×¢×•×‘×¨ input ×œ× ×ª×§×™×Ÿ
3. Error states - ×©××•×¦×’×•×ª ×”×•×“×¢×•×ª ×©×’×™××” ×‘×¨×•×¨×•×ª
4. Loading states - ×©×™×© feedback ×¢×œ ×¤×¢×•×œ×•×ª ××¨×•×›×•×ª
5. Mobile responsiveness - ×©×”×›×œ ×¢×•×‘×“ ×’× ×‘××•×‘×™×™×œ

### ×›×œ×™×
- Vitest ×œunit tests
- Playwright ×œ-E2E
- React Testing Library ×œ×§×•××¤×•× × ×˜×•×ª

## Performance

### ××˜×¨×•×ª
- First Contentful Paint < 1.5s
- Time to Interactive < 3s
- Lighthouse Score > 90

### ×˜×›× ×™×§×•×ª
1. Image optimization (Next.js Image)
2. Code splitting (dynamic imports)
3. Server Components ×œ×›×œ ××” ×©××¤×©×¨
4. Caching (SWR / React Query)
5. Database indexes

## Git Flow

### Branches
- `main` - production
- `develop` - staging
- `feature/*` - ×ª×›×•× ×•×ª ×—×“×©×•×ª
- `hotfix/*` - ×ª×™×§×•× ×™× ×“×—×•×¤×™×

### Commits
- ×©×¤×”: ×× ×’×œ×™×ª
- ×¤×•×¨××˜: `type(scope): message`
- Types: `feat`, `fix`, `docs`, `style`, `refactor`, `test`, `chore`

×“×•×’××”: `feat(dashboard): add financial health indicator`

## ×”×¢×¨×•×ª ×—×©×•×‘×•×ª

### ×©×™××•×© ×‘×–×™×›×¨×•×Ÿ
- ×§×¨× ××ª Memory Bank ×œ×¤× ×™ ×›×œ ×¢×‘×•×“×”
- ×¢×“×›×Ÿ activeContext.md ×›×©××ª×—×™×œ ××©×™××” ×—×“×©×”
- ×¢×“×›×Ÿ progress.md ×›×©××¡×™×™× ××©×™××”

### ×ª×§×©×•×¨×ª ×¢× ××©×ª××©
- ×ª××™×“ ×‘×¢×‘×¨×™×ª
- ×”×¡×‘×¨ ××” ×¢×©×™×ª ×•×œ××”
- ×”×¦×¢ ×¦×¢×“ ×”×‘×

### ×‘×¢×™×•×ª
- ×œ×ª×¢×“ ×‘-progress.md
- ×œ×™×¦×•×¨ issue ×× ×¦×¨×™×š ××¢×§×‘
- ×œ× ×œ×”×©××™×¨ TODO ×‘×§×•×“ ×‘×œ×™ ticket

